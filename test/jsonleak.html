<html>
<head>
<script src="prototype-1.6.1.js"></script>
<script src="../static-files/jquery.min.js"></script>
<script type="text/javascript">
  $(function(){
    var got = JSON.stringify({foo: ['a', 'b']});
    var expected = $("#expected").html();

    var out = $("#stringify");
    out.append(got);
    if( got === expected ) {
      out.css("background-color", "#C6E746");
    }
    else {
      out.css("background-color", "#FFCACA");
      console.log("Expected: " + expected + ", got: " + got);
    }
  });
</script>
</head>
<body>
  <pre>
This page includes *prototype.js 1.6.1* and the goggles.

Prototype.js 1.6.1 defines an Array.prototype.toJSON that doubly-quotes array elements within
objects during JSON stringification. This messes up the goggles, but "fixing" it might mess
up the page using prototype.js.

The goggles override the JSON object internally. This page demonstrates that that doesn't leak!

This --> { foo: ['a', 'b'] }
Stringifies (with the bug) as --> <span id="expected">{"foo":"[\"a\", \"b\"]"}</span>
...which you should see here: <span id="stringify"></span>

If the last line is green, the goggles have not changed external JSON.stringify behavior&mdash;there's no leak! 
Now launch the goggles and hit 'R' to remix. If the remix panel loads, then everything is dandy.

</pre>


</body>
</html>
